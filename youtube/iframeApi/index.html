<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Youtube Iframe API</title>
</head>
<body>

<iframe id="youtubePlayer" type="text/html" width="560" height="315" src="https://www.youtube.com/embed/7y6Vp6HmwMw?enablejsapi=1" frameborder="0" allowfullscreen></iframe>

<script>

var player;

/**
 * API 라이버르리가 완료되면 이 함수가 실행된다.
 */
function onYouTubeIframeAPIReady () {
    console.log("YouTube Iframe API Ready");

    player = new YT.Player("youtubePlayer", {
        events: {
            // 상태가 변할 때마다 실행시킬 이벤트 핸들러를 등록한다.
            "onStateChange": stateChange
        }
    });
}

/**
 * 이벤트 핸들러
 * 플레이어의 상태가 변경될 때마다 이 함수가 실행된다.
 */
function stateChange(state){
    switch(state.data) {
    case YT.PlayerState.END:
        // 동영상 플레이가 완료됐을 때
        console.log('END');
        break;
    case YT.PlayerState.PLAYING: 
        // 동영상을 플레이할 때
        console.log('PLAYING');
        break;
    case YT.PlayerState.PAUSED: 
        // 동영상 플레이가 중단됐을 때
        console.log('PAUSED');
        break;
    case YT.PlayerState.BUFFERING: 
        // 동영상을 위한 데이터를 불러올 때
        console.log('BUFFERING');
        break;
    case YT.PlayerState.CUED: 
        // 동영상을 로드하여 플레이 할 수 있을 때
        console.log('CUED');
        break;
    }
}

// youtube iframe api 라이브러리를 script 태그 삽입 방식으로 로드
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";

var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
</script>

</body>
</html>
